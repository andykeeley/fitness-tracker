{% extends "base.html" %}

{% block title %}{{ workout.workout_type|capitalize }} Workout - Andy's Fitness Hub{% endblock %}

{% block content %}
<div class="workout-detail">
    <div class="workout-info">
        <div class="workout-type-badge large">
            {% if workout.workout_type == 'strength' %}üèãÔ∏è Strength Training
            {% elif workout.workout_type == 'circuit' %}‚ö° Circuit Training
            {% else %}üèÉ Run{% endif %}
        </div>
        <p class="workout-date">{{ workout.date }}</p>
        {% if workout.duration_minutes %}
        <p class="workout-duration">‚è±Ô∏è {{ workout.duration_minutes }} min</p>
        {% endif %}

        {% if workout.notes %}
        <div class="notes-display">
            <p>{{ workout.notes }}</p>
        </div>
        {% endif %}
    </div>

    {% if workout.workout_type == 'run' %}
    <!-- Run Details -->
    <div class="run-details">
        <div class="run-stats">
            {% if workout.distance_km %}
            <div class="stat">
                <span class="stat-value">{{ "%.2f"|format(workout.distance_km) }}</span>
                <span class="stat-label">km</span>
            </div>
            {% endif %}
            {% if workout.duration_minutes %}
            <div class="stat">
                <span class="stat-value">{{ workout.duration_minutes }}</span>
                <span class="stat-label">minutes</span>
            </div>
            {% endif %}
            {% if workout.distance_km and workout.duration_minutes %}
            {% set pace = workout.duration_minutes / workout.distance_km %}
            <div class="stat">
                <span class="stat-value">{{ "%d:%02d"|format(pace|int, ((pace - pace|int) * 60)|int) }}</span>
                <span class="stat-label">/km pace</span>
            </div>
            {% endif %}
        </div>
    </div>
    {% else %}
    <!-- Strength/Circuit Details -->
    {% if exercises %}
    <section class="exercises-section">
        <h2>Exercises</h2>
        {% for item in exercises %}
        <div class="exercise-detail">
            <h3>{{ item.exercise.name }}</h3>
            {% if item.sets %}
            <div class="sets-list-view">
                {% for set in item.sets %}
                <div class="set-item-view">
                    <span class="set-number">Set {{ set.set_number }}</span>
                    <span class="set-details">{{ set.reps }} reps √ó {{ set.weight }} kg</span>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p class="no-sets">No sets recorded</p>
            {% endif %}
        </div>
        {% endfor %}
    </section>
    {% else %}
    <div class="empty-state">
        <p>No exercises recorded for this workout.</p>
    </div>
    {% endif %}
    {% endif %}

    <div class="workout-actions">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Workouts</a>
        <form method="POST" action="{{ url_for('delete_workout', workout_id=workout.id) }}" class="inline-form">
            <button type="submit" class="btn btn-danger" onclick="return confirm('Delete this workout?')">Delete</button>
        </form>
    </div>
</div>
{% endblock %}
