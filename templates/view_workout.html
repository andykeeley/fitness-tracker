{% extends "base.html" %}

{% block title %}{{ workout.exercise_type }} - Fitness Tracker{% endblock %}

{% block content %}
<div class="workout-detail">
    <div class="workout-info">
        <h1>{{ workout.exercise_type }}</h1>
        <p class="workout-date">{{ workout.date }}</p>
        {% if workout.notes %}
        <div class="notes-display">
            <p>{{ workout.notes }}</p>
        </div>
        {% endif %}
        <a href="{{ url_for('edit_workout', workout_id=workout.id) }}" class="btn btn-small">Edit Notes</a>
    </div>

    <section class="sets-section">
        <h2>Sets</h2>

        {% if sets %}
        <div class="sets-list">
            {% for set in sets %}
            <div class="set-item">
                <span class="set-number">Set {{ set.set_number }}</span>
                <span class="set-details">{{ set.reps }} reps @ {{ set.weight }} kg</span>
                <form method="POST" action="{{ url_for('delete_set', workout_id=workout.id, set_id=set.id) }}" class="delete-form">
                    <button type="submit" class="btn btn-delete" onclick="return confirm('Delete this set?')">X</button>
                </form>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="empty-sets">No sets recorded yet.</p>
        {% endif %}

        <form method="POST" action="{{ url_for('add_set', workout_id=workout.id) }}" class="add-set-form">
            <h3>Add Set</h3>
            <div class="set-inputs">
                <div class="form-group">
                    <label for="reps">Reps</label>
                    <input type="number" id="reps" name="reps" min="1" placeholder="10" required>
                </div>
                <div class="form-group">
                    <label for="weight">Weight (kg)</label>
                    <input type="number" id="weight" name="weight" min="0" step="0.5" placeholder="50" required>
                </div>
            </div>
            <button type="submit" class="btn btn-primary btn-full">Add Set</button>
        </form>
    </section>

    <div class="workout-actions">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Workouts</a>
        <form method="POST" action="{{ url_for('delete_workout', workout_id=workout.id) }}" class="delete-form">
            <button type="submit" class="btn btn-danger" onclick="return confirm('Delete this entire workout?')">Delete Workout</button>
        </form>
    </div>
</div>
{% endblock %}
